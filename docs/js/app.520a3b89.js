(function(){"use strict";var e={662:function(e,t,s){var i=s(7195),a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"no-select",attrs:{id:"app"},on:{dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.handleDrop.apply(null,arguments)}}},[t("img",{staticClass:"app-button scale-hover",staticStyle:{right:"20px"},attrs:{id:"add-button",src:"icons/add.svg"},on:{click:e.addSound}}),t("img",{staticClass:"app-button disabled",staticStyle:{right:"80px"},attrs:{id:"save-button",src:"icons/save.svg"},on:{click:e.save}}),t("img",{staticClass:"app-button disabled",staticStyle:{right:"140px"},attrs:{id:"record-button",src:"icons/record.svg"},on:{click:e.record}}),t("img",{staticClass:"app-button disabled",staticStyle:{right:"200px"},attrs:{id:"mic-button",src:"icons/mic.svg"},on:{click:e.microphone}}),e._l(e.samples,(function(s,i){return[t("Sample",{key:i,ref:`sample-${i}`,refInFor:!0,attrs:{name:s.name,audio:s.audio,idx:i,"audio-buffer":s.buffer},nativeOn:{mouseover:function(t){e.$root.lastSampleInteractionIdx=i}}})]})),t("Reverb",{ref:"reverb",staticStyle:{bottom:"50px",left:"30px"}}),t("Delay",{ref:"delay",staticStyle:{bottom:"50px",left:"280px"}}),t("input",{ref:"fileChooser",staticStyle:{display:"none"},attrs:{id:"hiddenFileInput",type:"file",accept:".mp3"},on:{change:e.handleAddSound}}),t("a",{attrs:{href:"https://github.com/Digitopia/DigiCanvas",target:"_blank"}},[t("img",{staticClass:"app-button scale-hover",attrs:{id:"info-button",src:"icons/info.svg"},on:{click:function(t){e.showInfo=!0}}})])],2)},n=[],r=(s(560),s(8858),s(1318),s(3228),s(8090)),o=s.n(r),l=function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"container"},[t("div",{staticClass:"sample",class:{playing:e.isPlaying}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"settings"===e.controls,expression:"controls === 'settings'"}],staticClass:"controls no-select",on:{click:function(e){e.stopPropagation()}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"sample"==e.mode,expression:"mode == 'sample'"}],staticClass:"spaced-out"},e._l(e.settings.sample.modes,(function(s){return t("img",{key:s,staticClass:"sample-mode-icon",class:{active:e.settings.sample.mode===s,disabled:"back-and-forth"===s},attrs:{src:`icons/${s}.svg`},on:{click:function(t){t.stopPropagation(),e.settings.sample.mode=s}}})})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:"granular"===e.mode,expression:"mode === 'granular'"}],staticClass:"granular-sliders spaced-out"},[t("div",{attrs:{id:`grainSize-${e.idx}`}},[e._v("Gs")]),t("div",{attrs:{id:`rate-${e.idx}`}},[e._v("Rt")]),t("div",{attrs:{id:`random-${e.idx}`}},[e._v("Rd")])])]),t("div",{ref:"header",staticClass:"header scale-hover",on:{dblclick:e.toggleEditName}},[e.isEditingName?[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editName,expression:"editName"}],staticStyle:{"text-align":"center"},attrs:{type:"text",maxlength:"20"},domProps:{value:e.editName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleEditName.apply(null,arguments)},input:function(t){t.target.composing||(e.editName=t.target.value)}}})]:[e._v(" "+e._s(e.name)+" ")]],2),t("div",{ref:"waveformWrapper",attrs:{id:"waveform-wrapper"}},[t("div",{ref:"waveform",class:`waveform-${e.idx}`}),t("canvas",{ref:"canvas",staticClass:"canvas"})]),t("div",{attrs:{id:"buttons"}},[t("div",{class:{active:"settings"===e.controls},attrs:{id:"settings-btn"},on:{click:function(t){return t.stopPropagation(),e.toggleControls("settings")}}},[t("img",{staticClass:"control-icon",attrs:{src:"icons/overlay.svg",alt:""}})]),t("div",{attrs:{id:"mode-btn"},on:{click:function(t){return t.stopPropagation(),e.toggleMode()}}},[t("img",{staticClass:"control-icon",attrs:{src:"sample"===e.mode?"icons/play.svg":"icons/granular.svg",alt:""}})]),t("div",{ref:"scaleButton",staticStyle:{"background-image":"url('icons/stretch.svg')"},attrs:{id:"scale-btn"},on:{click:function(t){return t.stopPropagation(),e.toggleControls("scale")}}},[t("img",{ref:"scaleImage",staticClass:"control-icon",attrs:{id:"scale-img",src:"icons/stretch.svg",alt:""},on:{dblclick:e.resetTimestretch}})])])])])},d=[],c=s(8652),h=s(8825),g=s(3582),u=s(1427),m=s.n(u),p=s(5886);const f=(e,t,s,i,a)=>(e-t)*(a-i)/(s-t)+i;function v(e,t,s){return Math.min(s,Math.max(t,e))}function b(e=0,t=1){const s=1-Math.random(),i=Math.random(),a=Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*i);return a*t+e}function y(e,t,s){let i,a,n,r,o,l,d,c,h,g,u,m;return i=e[0],a=e[1],n=e[2],r=e[3],o=t[0],l=t[1],d=t[2],c=t[3],h=i+(o-i)*s,g=a+(l-a)*s,u=n+(d-n)*s,m=r+(c-r)*s,[h,g,u,m]}function w(e,t,s){const i=f(e,t,s,0,1),a=.14462*Math.log(1006.94*i),n=f(a<0?0:a,0,1,t,s);return n}var x={props:{audio:{type:String,required:!0},audioBuffer:{type:AudioBuffer,required:!1},name:{type:String,required:!0},idx:{type:Number,required:!0}},data(){return{isEditingName:!1,editName:null,audioNode:null,audioElementSource:null,wavesurfer:null,controls:"",mode:"sample",settings:{sample:{modes:["one-shot","loop"],mode:"loop"},granular:{origin:.5,params:{grainSize:{min:.1,max:1.5,step:.01,value:.2},rate:{min:.1,max:1.5,value:1.5},random:{min:0,max:1,value:.8}},sliders:{},grains:[],envelope:{attack:.02,release:.02}},scale:{params:{amplitude:{min:.05,max:1.5,value:1},timestretch:{value:1}}}},region:null,isPlaying:!1,canvas:null,canvasCtx:null,width:null,height:null,pixelsPerSecond:40,maxWidth:750,minWidth:200,originalDuration:null,originalWidth:null,effectSends:{reverb:null,delay:null}}},computed:{maxDuration(){return this.maxWidth/this.pixelsPerSecond},isLooping(){return!("sample"===this.mode&&"one-shot"===this.settings.sample.mode)},bufferDuration(){return this.audioNode&&this.audioNode.buffer?this.audioNode.buffer.duration:NaN},grainSize(){return this.settings.granular.params.grainSize.value}},watch:{isPlaying(){console.log("isPlaying",this.isPlaying)},controls(){console.log("controls are now",this.controls);const e=null===this.controls||"scale"===this.controls;this.settings.region.setOptions({resize:e,drag:e})}},mounted(){window.WaveSurfer=c.Z,window.region=this.settings.region,window.settings=this.settings,window.propAudioBuffer=this.audioBuffer,window.propAudio=this.audio,this.editName=this.name,this.initWaveform(),this.initAudio(),this.initGranularSliders(),this.initCanvas(),this.$refs.container.style.minWidth=this.minWidth+"px",this.$refs.container.style.maxWidth=this.maxWidth+"px",this.$root.$on("toggleControls",this.toggleControls),this.$root.$on("effectDrag",this.effectDrag),document.addEventListener("keydown",(e=>{"Backspace"!==e.key||this.$root.lastSampleInteractionIdx!==this.idx||this.isEditingName||this.$destroy()})),window.grains=this.settings.granular.grains},beforeDestroy(){console.log("this is going to be destroyed"),this.resizeObserver.unobserve(this.$refs.container),this.$root.$off("toggleCofftrols",this.toggleControls),this.$root.$off("effectDrag",this.effectDrag),this.$el.parentNode.removeChild(this.$el)},methods:{getInvertedRate(){return f(this.settings.granular.params.rate.value,this.settings.granular.params.rate.min,this.settings.granular.params.rate.max,this.settings.granular.params.rate.max,this.settings.granular.params.rate.min)},toggleEditName(){this.isEditingName=!this.isEditingName,this.isEditingName?this.draggable.disable():(this.name=this.editName,this.draggable.enable())},timestamp2Progress(e){return f(e,0,this.bufferDuration,0,1)},initWaveform(){const e=c.Z.create({container:this.$refs.waveform,backgroundColor:"white",waveColor:"lightgray",progressColor:"lightgray",cursorColor:"black",cursorWidth:1,barWidth:2,barHeight:1,barGap:3,normalize:!1,interact:!1,hideScrollbar:!0,plugins:[h.Z.create({})]});if(this.regionsPlugin=e.registerPlugin(h.Z.create()),e.on("ready",(()=>{console.log("waveform ready for",this.audio),this.audioElementSource=o().context.createMediaElementSource(e.media),o().connect(this.audioElementSource,this.audioGainNode),this.resize()})),e.on("finish",(()=>{this.isLooping&&this.settings.region.play()})),e.on("load",(e=>{console.log("ON LOAD",e)})),e.on("loading",(()=>{console.log("ON LOADING")})),this.wavesurfer=e,window.wavesurfer=e,this.$refs.waveform.addEventListener("click",this.onClick),this.audioBuffer){console.log("this.audio",this.audio);const t=e.loadBlob(this.audio,[this.audioBuffer.getChannelData(0)],this.audioBuffer.duration);console.log(t),window.p=t}else e.load(this.audio);this.draggable=g.Z.create(this.$refs.container,{trigger:this.$refs.header,type:"x,y",bounds:"html",zIndexBoost:!0,onDrag:()=>{this.$root.$emit("effectDrag",this.$parent.$refs.reverb.$children[0]),this.$root.$emit("effectDrag",this.$parent.$refs.delay.$children[0])}})[0]},initAudio(){console.log("init audio"),this.audioNode=new(o().Player)(this.audio,(()=>{console.log("loaded audio",this.audio),this.originalDuration=this.bufferDuration,this.$refs.container.style.width=this.bufferDuration*this.pixelsPerSecond+"px",this.originalWidth=parseInt(this.$refs.container.style.width),console.log("originalWidth",this.originalWidth),this.resetTimestretch(),this.initResizeObserver(),this.initScaleDraggable(),setTimeout((()=>{this.initRegion(),this.stop()}),200)})),this.audioNode.volume.value=-6,window.audioNode=this.audioNode,this.audioGainNode=new(o().Gain)(this.settings.scale.params.amplitude.value);const e=["reverb","delay"];e.forEach((e=>{this.effectSends[e]=new(o().Gain)(0),this.effectSends[e].connect(this.$root.effectNodes[e]),this.audioGainNode.connect(this.effectSends[e])})),this.audioGainNode.connect(o().Master)},initGranularSliders(){const e={size:[20,80],mode:"relative"},t=new(m().Slider)(`#grainSize-${this.idx}`,{...e,...this.settings.granular.params.grainSize});this.settings.granular.sliders.grainSize=t,t.on("change",(e=>{const t=w(e,this.settings.granular.params.grainSize.min,this.settings.granular.params.grainSize.max);console.log("grainSize is now",e.toFixed(2),t.toFixed(2)),this.settings.granular.params.grainSize.value=t}));const s=new(m().Slider)(`#rate-${this.idx}`,{...e,...this.settings.granular.params.rate});this.settings.granular.sliders.rate=s,s.on("change",(e=>{const t=w(e,this.settings.granular.params.rate.min,this.settings.granular.params.rate.max);this.settings.granular.params.rate.value=t,console.log("rate is now",e.toFixed(2),t.toFixed(2),this.getInvertedRate().toFixed(2))}));const i=new(m().Slider)(`#random-${this.idx}`,{...e,...this.settings.granular.params.random});this.settings.granular.sliders.rate=i,i.on("change",(e=>{console.log("random is now",e),this.settings.granular.params.random.value=e})),t.colorize("accent","var(--blue)"),t.colorize("fill","var(--blue-light)"),s.colorize("accent","var(--blue)"),s.colorize("fill","var(--blue-light)"),i.colorize("accent","var(--blue)"),i.colorize("fill","var(--blue-light)")},updateAmplitude(e){console.log("amplitude is now",e),this.wavesurfer.setOptions({barHeight:e}),console.log("using amplitude of ",e,"to apply in gain node"),this.audioGainNode.gain.exponentialRampToValueAtTime(e,.02),this.settings.scale.params.amplitude.value=e},updateTimestretch(e){console.log("timestretch is now",e),this.$refs.container.style.width=`${e}px`;const t=1/(e/this.originalWidth),s=[255,255,255,.95],i=[255,255,255,.95],a=y(s,i,f(e,this.minWidth,this.maxWidth,0,1));this.$refs.container.style.backgroundColor=`rgba(${a[0]},${a[1]},${a[2]},${a[3]})`,this.settings.scale.params.timestretch.value=t,console.log("playbackRate",t),this.resize(),this.wavesurfer.setPlaybackRate(t,!1)},initCanvas(){this.canvas=this.$refs.canvas,this.canvasCtx=this.canvas.getContext("2d"),this.resize()},initScaleDraggable(){const e=this;g.Z.create(this.$refs.scaleImage,{trigger:this.$refs.scaleImage,type:"y",lockAxis:!0,bounds:{minY:0,maxY:-128},onDragEnd:function(){p.ZP.to(this.target,{y:0,ease:"power2.out",duration:.2})},onDragStart:()=>{p.ZP.set(this.$refs.scaleImage,{cursor:"grabbing"})},onDrag:function(){if(console.log("end",this.endX,this.endY),"x"===this.lockedAxis){const t=f(this.endY,0,-128,e.settings.scale.params.amplitude.min,e.settings.scale.params.amplitude.max);e.updateAmplitude(t)}}})},initResizeObserver(){const e=new ResizeObserver((e=>{e.forEach((e=>{const t=e.contentRect.width;console.log("newWidth",t),this.updateTimestretch(t)}))}));e.observe(this.$refs.container),this.resizeObserver=e},resetTimestretch(){this.updateTimestretch(this.originalDuration*this.pixelsPerSecond),this.updateAmplitude(1)},initRegion(){console.log("initting region...");const e=0,t=this.audioNode.buffer.duration;this.settings.region=this.regionsPlugin.addRegion({start:e,end:t,content:"",color:"rgba(170, 197, 216, 0.1)",resize:!0,drag:!0,loop:!1}),console.log("added region",this.settings.region),window.region=this.settings.region,this.settings.region.on("update",(()=>{if("granular"===this.mode){const{start:e,end:t}=this.settings.region,s=(t-e)/2+e;this.settings.granular.origin=this.timestamp2Progress(s)}})),this.settings.region.on("update-end",(()=>{"sample"!==this.mode||this.isPlaying||this.stop()})),this.settings.region.on("region-out",(()=>{console.log("region out"),this.isLooping?(console.log("playing region again"),this.settings.region.play()):this.stop()}))},resize(){console.log("resizing..."),this.width=this.$refs.waveformWrapper.clientWidth,this.height=this.$refs.waveformWrapper.clientHeight,console.log({height:this.height}),console.log(this.width,this.height),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.wavesurfer.setOptions({height:this.height})},play(){"sample"===this.mode?(this.wavesurfer.setOptions({cursorColor:"black"}),this.settings.region.play(),this.audioGainNode.gain.exponentialRampToValueAtTime(1,.02)):(this.resize(),this.addGrain(),this.updateRateInterval()),this.isPlaying=!0},stop(){"sample"===this.mode?(this.wavesurfer.setOptions({cursorColor:"transparent"}),this.wavesurfer.stop(),this.wavesurfer.seekTo(this.timestamp2Progress(this.settings.region.start))):(this.clearGranularInterval(),this.clearCanvas()),this.isPlaying=!1},toggleControls(e){console.log("toggling controls:",e),this.controls=this.controls===e?null:e},toggleMode(){switch(this.stop(),this.mode="sample"===this.mode?"granular":"sample",console.log("mode is now",this.mode),this.mode){case"sample":this.wavesurfer.setOptions({interact:!0});break;case"granular":this.wavesurfer.setOptions({interact:!1});break}},clearGranularInterval(){console.log("clearing granular interval",this.settings.granular.params.rate.interval),clearInterval(this.settings.granular.params.rate.interval)},updateRateInterval(){this.clearGranularInterval();const e=Math.round(1e3*this.getInvertedRate());console.log("INVERTED RATE",e),this.settings.granular.params.rate.interval=setInterval((e=>{this.addGrain();const t=Math.round(1e3*this.getInvertedRate());e!==t&&this.updateRateInterval()}),e,e)},addGrain(){this.buffer=this.audioNode.buffer.getChannelData(0);const e=f(this.settings.granular.origin,0,1,0,this.bufferDuration),t=(this.settings.region.end-this.settings.region.start)/4,s=f(this.settings.granular.params.random.value,0,1,0,t),i=b(0,s),a=v(e+i,this.settings.region.start,this.settings.region.end),n=new(o().Player)(this.audioNode.buffer);n.fadeIn=this.settings.granular.envelope.attack,n.fadeOut=this.settings.granular.envelope.release,n.playbackRate=this.settings.scale.params.timestretch.value,setTimeout((()=>{this.settings.granular.grains.shift(),this.drawGrains()}),1e3*this.grainSize),n.volume.value=-6,window.grain=n,n.connect(this.audioGainNode),n.start("+0",a,this.grainSize);const r=f(a,0,this.bufferDuration,0,this.width);this.settings.granular.grains.push({x:r}),this.drawGrains()},clearCanvas(){this.canvasCtx.clearRect(0,0,this.width,this.height)},drawGrains(){this.clearCanvas(),this.canvasCtx.fillStyle="rgba(10, 10, 10, 0.4)",this.canvasCtx.beginPath();for(let e=0;e<this.settings.granular.grains.length;e++){const{x:t}=this.settings.granular.grains[e];this.canvasCtx.fillStyle="var(--blue)",this.canvasCtx.beginPath();const s=this.width/this.bufferDuration*this.grainSize/2;console.log("HEIGHT",this.height),this.canvasCtx.arc(t,this.height/2,s,0,2*Math.PI),this.canvasCtx.fill(),this.canvasCtx.closePath()}},onClick(){o().context.resume(),this.controls||(console.log("click"),"sample"===this.mode?this.wavesurfer.isPlaying()?(console.log("stopping..."),this.stop()):this.play():"granular"===this.mode&&(0===this.settings.granular.grains.length?this.play():this.stop()))},effectDrag(e){const{name:t,rangeRadius:s}=e,i=e.$el,a=i.getBoundingClientRect(),n=a.left+a.width/2,r=a.top+a.height/2,o=this.$refs.waveform.getBoundingClientRect(),l=o.left+o.width/2,d=o.top+o.height/2,c=n-l,h=r-d,g=Math.round(Math.sqrt(c*c+h*h));if(console.log(`"d(${this.name}, ${t})"`,g),g>s)return;const u=f(g,0,s,1,0).toFixed(2);console.log(u),this.effectSends[t].gain.exponentialRampToValueAtTime(u,.02)}}},S=x,$=s(1001),k=(0,$.Z)(S,l,d,!1,null,"7ecc444c",null),C=k.exports,N=function(){var e=this,t=e._self._c;return t("Effect",{attrs:{params:e.params,"effect-node":e.reverbNode,icon:"icons/reverb.svg",name:"reverb"}})},A=[],P=function(){var e=this,t=e._self._c;return t("div",{ref:"effect",staticClass:"effect"},[t("div",{ref:"effectArea",staticClass:"effect-area"}),t("div",{ref:"effectCenter",staticClass:"effect-center",style:{backgroundImage:`url('${e.icon}')`},on:{dblclick:function(t){t.stopPropagation(),e.showSliders=!e.showSliders}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showSliders,expression:"showSliders"}],staticClass:"sliders"},e._l(e.params,(function(s,i,a){return t("round-slider",{key:i,staticStyle:{position:"absolute"},attrs:{id:i,"start-angle":a*e.sliderArcAngle+a*e.sliderArcAngleStep-e.sliderArcAngleAngleOffset,"end-angle":`+${e.sliderArcAngle}`,"line-cap":"round",width:"8","path-color":"rgba(255,255,255,0.4)","range-color":"var(--blue)",animation:!1,radius:"50","show-tooltip":!1,"keyboard-action":!1,min:s.min,max:s.max,step:s.step,"handle-size":"+2",update:e.handleParamChange},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"param.value"}})})),1)])},D=[],z=s(9165);p.ZP.registerPlugin(g.Z);var O={components:{RoundSlider:z.Z},props:{params:{type:Object,required:!0},name:{type:String,required:!0},icon:{type:String,required:!0}},data(){return{effectNode:null,showSliders:!1,sliderArcAngle:90,rangeRadius:null}},computed:{sliderArcAngleStep(){const e=Object.keys(this.params).length,t=360-e*this.sliderArcAngle;return t/e},sliderArcAngleAngleOffset(){return this.sliderArcAngle+this.sliderArcAngleStep/2-90}},created(){this.params.range={min:40,max:120,step:1,value:50,handler:e=>{console.log("handler",e);const{min:t,max:s}=this.params.range;console.log(t,s);const i=f(e,t,s,1,s/t);console.log({scale:i}),this.$refs.effectArea.style.transform=`scale(${i})`}},this.rangeRadius=this.params.range.value},mounted(){this.initDraggable()},methods:{initDraggable(){g.Z.create(this.$refs.effect,{trigger:this.$refs.effectCenter,type:"x,y",bounds:"html",zIndexBoost:!1,onDragStart:()=>{const e=document.querySelectorAll(".effect-area"),t=Math.max(...Array.from(e).map((e=>parseInt(e.style.zIndex))));this.$refs.effectArea.style.zIndex=t+1},onDrag:()=>{this.$root.$emit("effectDrag",this)}})},handleParamChange(e){console.log("handleParamChange!"),console.log("handleParamChange!");const t=e.id,s=e.value;console.log(t,s),this.params[t].handler(s)}}},R=O,I=(0,$.Z)(R,P,D,!1,null,null,null),_=I.exports,E={components:{Effect:_},data(){return{reverbNode:null,params:{dampening:{min:0,max:2e4,step:100,value:8e3,handler:e=>{console.log("dampening is now",e),this.reverbNode.dampening.rampTo(e,.01)}},decay:{min:.15,max:1,step:.01,value:.5,handler:e=>{console.log("decay/roomsize is now",e),this.reverbNode.roomSize.rampTo(e,.01)}}}}},mounted(){this.reverbNode=new(o().Freeverb)(this.params.decay.value,this.params.dampening.value).toMaster(),console.log("created reverb node"),this.$root.effectNodes||(this.$root.effectNodes=[]),this.$root.effectNodes["reverb"]=this.reverbNode}},T=E,W=(0,$.Z)(T,N,A,!1,null,null,null),G=W.exports,M=function(){var e=this,t=e._self._c;return t("Effect",{attrs:{params:e.params,"effect-node":e.delayNode,icon:"icons/delay.svg",name:"delay"}})},B=[],Z={components:{Effect:_},data(){return{delayNode:null,params:{delayTime:{min:0,max:2.5,step:.01,value:.5,handler:e=>{console.log("delay time is now",e),this.delayNode.delayTime.rampTo(e,.01)}},feedback:{min:0,max:1,step:.01,value:.5,handler:e=>{console.log("feedback is now",e),this.delayNode.feedback.rampTo(e,.01)}}}}},mounted(){this.delayNode=new(o().FeedbackDelay)(this.params.delayTime.value,this.params.feedback.value).toMaster(),console.log("created delay node"),this.$root.effectNodes||(this.$root.effectNodes=[]),this.$root.effectNodes["delay"]=this.delayNode}},F=Z,L=(0,$.Z)(F,M,B,!1,null,null,null),q=L.exports,j={name:"App",components:{Sample:C,Reverb:G,Delay:q},data(){return{samples:[],presets:{0:{audio:"presets/guit_plus_background.mp3",name:"guit + bg"},1:{audio:"presets/birds1_mono.mp3",name:"birds"},2:{audio:"presets/chains1_mono.mp3",name:"chains"},3:{audio:"presets/flute1_mono.mp3",name:"flute"},4:{audio:"presets/horse1_mono.mp3",name:"horse"},5:{audio:"presets/marimba_roll_and_clarinet1_mono.mp3",name:"marimba"},6:{audio:"presets/metalHit1_mono.mp3",name:"metal 1"},7:{audio:"presets/metalHit2_mono.mp3",name:"metal 2"},8:{audio:"presets/sailing1_mono.mp3",name:"sailing"},9:{audio:"presets/snoring1_mono.mp3",name:"snoring"}}}},mounted(){document.addEventListener("keydown",(e=>{0!=e.key&&1!=e.key&&2!=e.key&&3!=e.key&&4!=e.key&&5!=e.key&&6!=e.key&&7!=e.key&&8!=e.key&&9!=e.key||this.samples.push(this.presets[e.key])})),window.Tone=o()},methods:{addSound(){console.log("adding sound..."),this.$refs.fileChooser.click()},handleAddSound(e){const t=e.target.files[0];console.log("Selected file:",t),this.initSample(t)},record(){console.log("recording...")},save(){console.log("saving...")},microphone(){console.log("microphoning...")},handleDrop(e){console.log("handling drop");const t=e.dataTransfer.files[0];t&&t.type.startsWith("audio/")?this.initSample(t):alert("Please drop a valid audio file.")},initSample(e){const t=new FileReader;t.onload=s=>{const i=new Blob([t.result],{type:e.type});console.log("BLOB",i);const a=URL.createObjectURL(i),n=new Audio;n.src=a,n.addEventListener("loadedmetadata",(()=>{console.log("Audio duration:",n.duration),n.duration>5?(console.log(a),this.samples.push({audio:a,name:e.name.replace(/\.[^/.]+$/,"")})):alert("Samples need to be between 5 and 15 seconds.")})),n.load()},t.readAsArrayBuffer(e)},addSilenceToEnd(e,t){const s=e.duration;if(s>=t)return console.log("Audio is already equal to or longer than the target duration."),e;const i=e.numberOfChannels,a=e.sampleRate,n=Math.floor(t*a),r=o().context.createBuffer(i,n,a);for(let o=0;o<i;o++){const t=e.getChannelData(o);r.getChannelData(o).set(t)}return r}}},H=j,V=(0,$.Z)(H,a,n,!1,null,null,null),Y=V.exports;i.ZP.config.productionTip=!1,new i.ZP({render:e=>e(Y)}).$mount("#app")}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,n){if(!i){var r=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],n=e[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,n,r=i[0],o=i[1],l=i[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var c=l(s)}for(t&&t(i);d<r.length;d++)n=r[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},i=self["webpackChunkdigicanvas"]=self["webpackChunkdigicanvas"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(662)}));i=s.O(i)})();
//# sourceMappingURL=app.520a3b89.js.map